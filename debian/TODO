
* version as variable (in patches)
+PACKAGE_VERSION='4.10'
+PACKAGE_STRING='Xen Hypervisor 4.10'

* watchdogd:
Jan 14 06:06:20 router systemd[14029]: xen-watchdog.service: Failed at step EXEC spawning /usr/sbin/xenwatchdogd: No such file or directory

* new xenstore

XENSTORED=/usr/sbin/oxenstored
[ -z "$XENSTORE_DOMAIN_KERNEL" ] && XENSTORE_DOMAIN_KERNEL=/usr/lib/xen/boot/xenstore-stubdom.gz

* fix qemu init script:

  ExecStart=/usr/lib/xen/bin/qemu-system-i386 -xen-domid 0 \

* stubdoms pull from other git repo
	root@pbuilder:~/src/xenpkg/debian-xen/debian/build/build-hypervisor_amd64_amd64# make mini-os-dir
	if [ ! -d /root/src/xenpkg/debian-xen/debian/build/build-hypervisor_amd64_amd64/extras/mini-os ]; then \
		GIT=git /root/src/xenpkg/debian-xen/debian/build/build-hypervisor_amd64_amd64/scripts/git-checkout.sh \
			git://xenbits.xen.org/mini-os.git \
			xen-RELEASE-4.10.0 \
			/root/src/xenpkg/debian-xen/debian/build/build-hypervisor_amd64_amd64/extras/mini-os ; \
	fi
	Cloning into '/root/src/xenpkg/debian-xen/debian/build/build-hypervisor_amd64_amd64/extras/mini-os-remote.tmp'...
	remote: Counting objects: 4194, done.
	remote: Compressing objects: 100% (4095/4095), done.
	remote: Total 4194 (delta 2856), reused 0 (delta 0)
	Receiving objects: 100% (4194/4194), 1.15 MiB | 927.00 KiB/s, done.
	Resolving deltas: 100% (2856/2856), done.
	Switched to a new branch 'dummy'

* download stubdom libs tarball when making orig.tar.gz?
cd stubdom
./configure
make gmp-4.3.2.tar.bz2
make grub-0.97.tar.gz
make lwip-1.3.0.tar.gz
make newlib-1.16.0.tar.gz
make pciutils-2.2.9.tar.bz2
make tpm_emulator-0.7.4.tar.gz
make zlib-1.2.3.tar.gz

make[1]: Entering directory '/root/src/xenpkg/debian-xen/debian/build/build-utils_amd64/tools'
set -ex; \
if test -d git://xenbits.xen.org/qemu-xen-traditional.git; then \
        mkdir -p qemu-xen-traditional-dir; \
else \
        export GIT=git; \
        /root/src/xenpkg/debian-xen/debian/build/build-utils_amd64/tools/../scripts/git-checkout.sh git://xenbits.xen.org/qemu-xen-traditional.git xen-4.10.0 qemu-xen-traditional-dir; \
fi
+ test -d git://xenbits.xen.org/qemu-xen-traditional.git
+ export GIT=git
+ /root/src/xenpkg/debian-xen/debian/build/build-utils_amd64/tools/../scripts/git-checkout.sh git://xenbits.xen.org/qemu-xen-traditional.git xen-4.10.0 qemu-xen-traditional-dir
Cloning into 'qemu-xen-traditional-dir-remote.tmp'...
remote: Counting objects: 41689, done.
remote: Compressing objects: 100% (9210/9210), done.
remote: Total 41689 (delta 32793), reused 41111 (delta 32424)
Receiving objects: 100% (41689/41689), 17.23 MiB | 228.00 KiB/s, done.
Resolving deltas: 100% (32793/32793), done.
Switched to a new branch 'dummy'
make[1]: Leaving directory '/root/src/xenpkg/debian-xen/debian/build/build-utils_amd64/tools'


//usr/lib/xen-4.10/boot/pv-grub-x86_64.gz
 //usr/lib/xen-4.10/boot/xenstore-stubdom.gz
//usr/lib/xen-4.10/bin/stubdom-dm
//usr/lib/xen-4.10/bin/stubdompath.sh
//usr/lib/xen-4.10/boot/ioemu-stubdom.gz


(Reading database ... 203919 files and directories currently installed.)
Removing xen-utils-common (4.10.0-1~yolo4) ...
Failed to stop xenstored.service: Operation refused, unit xenstored.service may be requested by dependency only (it is configured to refuse manual start/stop).
See system logs and 'systemctl status xenstored.service' for details.
dpkg: error processing package xen-utils-common (--remove):
 installed xen-utils-common package pre-removal script subprocess returned error exit status 4
A dependency job for xenconsoled.service failed. See 'journalctl -xe' for details.
A dependency job for xendomains.service failed. See 'journalctl -xe' for details.
A dependency job for xen-init-dom0.service failed. See 'journalctl -xe' for details.
A dependency job for xen-qemu-dom0-disk-backend.service failed. See 'journalctl -xe' for details.
Job for xenstored.service failed because the control process exited with error code.
See "systemctl status xenstored.service" and "journalctl -xe" for details.
Job for xen-watchdog.service failed because the control process exited with error code.
See "systemctl status xen-watchdog.service" and "journalctl -xe" for details.
Errors were encountered while processing:
 xen-utils-common
E: Sub-process /usr/bin/dpkg returned an error code (1)

